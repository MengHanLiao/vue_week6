{"version":3,"file":"js/459.06169330.js","mappings":"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","sources":["webpack://vue_week6/./src/views/CartView.vue","webpack://vue_week6/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\n  <div>\n    <div class=\"container\">\n      <div class=\"mt-4\">\n        <h3 class=\"text-center\">購物車</h3>\n        <table class=\"table align-middle\">\n          <thead>\n            <tr>\n              <th></th>\n              <th>品名</th>\n              <th style=\"width: 150px\">數量/單位</th>\n              <th class=\"text-end\">單價</th>\n            </tr>\n          </thead>\n          <tbody>\n            <template v-if=\"carts.carts.length !== 0\">\n              <tr v-for=\"cart in carts.carts\" :key=\"cart.id\">\n                <td>\n                  <button\n                    type=\"button\" class=\"btn btn-outline-danger btn-sm\"\n                    @click=\"deleteItem(cart.id)\"\n                  >\n                    <i class=\"fas fa-spinner fa-pulse\"></i>\n                    x\n                  </button>\n                </td>\n                <td>\n                  {{ cart.product.title }}\n                </td>\n                <td>\n                  <div class=\"input-group input-group-sm\">\n                    <label for=\"productNum\" class=\"input-group\">\n                      <input\n                        min=\"1\"\n                        type=\"number\"\n                        class=\"form-control\"\n                        id=\"productNum\"\n                        v-model.number=\"cart.qty\"\n                        @blur=\"updateCart(cart.id, cart.product.id, cart.qty)\"\n                      />\n                      <span class=\"input-group-text\" id=\"basic-addon2\">\n                        {{ cart.product.unit }}\n                      </span>\n                    </label>\n                  </div>\n                </td>\n                <td class=\"text-end\">\n                  <small class=\"text-success\">折扣價：</small>\n                  {{ cart.total }}\n                </td>\n              </tr>\n            </template>\n            <template v-else>\n              <tr>\n                <td colspan=\"4\">\n                  前往選購 <router-link to=\"/products\" class=\"btn btn-primary\">商品頁面</router-link>\n                </td>\n              </tr>\n            </template>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan=\"3\" class=\"text-end\">總計</td>\n              <td class=\"text-end\">NT$ {{ carts.final_total }}</td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n      <div class=\"my-5 row justify-content-center\">\n        <h3 class=\"text-center\">購買者資訊</h3>\n        <v-form ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"submitOrder\">\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\">Email</label>\n            <v-field\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"required|email\"\n              v-model=\"userForm.user.email\"\n            ></v-field>\n            <error-message\n              name=\"email\"\n              class=\"invalid-feedback\"\n            ></error-message>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"name\" class=\"form-label\">收件人姓名</label>\n            <v-field\n              id=\"name\"\n              name=\"姓名\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['姓名'] }\"\n              placeholder=\"請輸入姓名\"\n              rules=\"required\"\n              v-model=\"userForm.user.name\"\n            ></v-field>\n            <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"tel\" class=\"form-label\">收件人電話</label>\n            <v-field\n              id=\"tel\"\n              name=\"電話\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['電話'] }\"\n              placeholder=\"請輸入電話\"\n              :rules=\"isPhone\"\n              v-model=\"userForm.user.tel\"\n            ></v-field>\n            <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"address\" class=\"form-label\">收件人地址</label>\n            <v-field\n              id=\"address\"\n              name=\"地址\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['地址'] }\"\n              placeholder=\"請輸入地址\"\n              rules=\"required\"\n              v-model=\"userForm.user.address\"\n            ></v-field>\n            <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"message\" class=\"form-label\">留言</label>\n            <textarea\n              id=\"message\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"userForm.message\"\n            ></textarea>\n          </div>\n          <div class=\"text-end\">\n            <button\n              type=\"submit\"\n              class=\"btn btn-danger\"\n              :disabled=\"carts.carts.length === 0 && Object.keys(errors).length === 0\"\n            >\n              送出訂單\n            </button>\n          </div>\n        </v-form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      carts: {\n        carts: [],\n      },\n      userForm: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n    };\n  },\n  methods: {\n    getCarts() {\n      this.$http\n        .get(`${process.env.VUE_APP_API_BASEURL}api/${process.env.VUE_APP_PATH}/cart`).then((res) => {\n          this.carts = res.data.data;\n        })\n        .catch((err) => {\n          alert(err.response.data.message);\n        });\n    },\n    updateCart(cartId, productId, qty = 1) {\n      if (qty > 0 && Number.isInteger(qty)) {\n        const data = {\n          product_id: productId,\n          qty,\n        };\n        this.$http\n          .put(\n            `${process.env.VUE_APP_API_BASEURL}api/${process.env.VUE_APP_PATH}/cart/${cartId}`,\n            { data },\n          )\n          .then(() => {\n            alert('成功更新商品數量');\n            this.isLoading = false;\n          })\n          .catch((err) => {\n            console.dir(err);\n          });\n      }\n    },\n    deleteItem(id) {\n      this.$http.delete(`${process.env.VUE_APP_API_BASEURL}api/${process.env.VUE_APP_PATH}/cart/${id}`).then(() => {\n        this.getCarts();\n        alert('成功刪除商品');\n      }).catch((err) => {\n        alert(err.response.data.message);\n      });\n    },\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/;\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼';\n    },\n    submitOrder() {\n      this.$http.post(`${process.env.VUE_APP_API_BASEURL}api/${process.env.VUE_APP_PATH}/order`, { data: this.userForm }).then(() => {\n        alert('訂單成功送出');\n        this.carts.carts = [];\n        this.$refs.form.resetForm();\n        this.message = '';\n      }).catch((err) => {\n        alert(err.response.data.message);\n      });\n    },\n  },\n  mounted() {\n    this.getCarts();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=11e17c02\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\s1102\\\\OneDrive\\\\桌面\\\\vue_cli\\\\vue_week6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_7","for","id","colspan","_createElementBlock","_hoisted_3","_hoisted_5","$data","carts","length","_Fragment","key","_renderList","cart","type","onClick","$options","_toDisplayString","product","title","min","qty","$event","onBlur","unit","_hoisted_15","total","_hoisted_16","_createVNode","_component_router_link","to","_hoisted_20","final_total","_hoisted_23","_component_v_form","ref","onSubmit","errors","_hoisted_25","_component_v_field","name","placeholder","rules","user","email","_component_error_message","_hoisted_27","_hoisted_29","tel","_hoisted_31","address","_hoisted_33","cols","rows","message","disabled","Object","keys","_hoisted_35","data","userForm","methods","getCarts","this","$http","get","then","res","catch","err","alert","response","updateCart","cartId","productId","Number","isInteger","product_id","put","isLoading","console","dir","deleteItem","delete","isPhone","value","phoneNumber","test","submitOrder","post","$refs","form","resetForm","mounted","__exports__","render"],"sourceRoot":""}